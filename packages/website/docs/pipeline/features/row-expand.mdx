---
id: row-expand
title: 行分组(需要重构)
---

表格行分组，点击「分组标题」之后 表格将展示该组下的数据。「分组标题」总是独占一行。

:::note
想要在展开的单元格内渲染自定义内容？ 你需要 [行详情](row-detail)。
:::

### 示例

```jsx live
function 行展开() {
  // dataSource 结构：
  //  [ { id: '1', title: '阿里巴巴网络技术有限公司', children: [...] },
  //    { id: '2', title: '蚂蚁金服有限公司', children: [...] },
  //    { id: '3', title: '其他', children: [...] }, ]
  const dataSource = assets.biz.dataSource5.concat([{ id: 'test', title: 'title 测试' }])
  const columns = assets.biz.columns5
  const pipeline = useTablePipeline({ components: fusion })
    .input({ dataSource, columns })
    .primaryKey('id')
    .use(features.rowExpand({ defaultOpenKeys: ['1'] }))

  return <WebsiteBaseTable {...pipeline.getProps()} />
}
```

### 用法

- 启用行分组功能之前，pipeline 必须已经设置了 primaryKey，且 primaryKey 只能为字符串。
- 行分组会从 pipeline.ctx.indents 中读取缩进配置

```jsx
pipeline.use(features.rowExpand(options))
```

options 结构如下：

```typescript
export interface RowExpandFeatureOptions {
  /** 非受控用法：默认展开的 keys */
  defaultOpenKeys?: string[]

  /** 受控用法：当前展开的 keys */
  openKeys?: string[]

  /** 受控用法：当前展开 keys 改变回调 */
  onChangeOpenKeys?(nextKeys: string[], key: string, action: 'expand' | 'collapse'): void
}
```

TODO 注意行分组的要求的 dataSource 结构为：

```typescript
type RowGroupDataSource = Array<{
  groupTitle: ReactNode
  children: Array<any[]>
}>
```

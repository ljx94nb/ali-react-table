---
id: tree-mode
title: 树状模式
---

让表格支持树形数据的展示，当数据中有 children 字段时会自动展示为树形表格。可以通过设置 indentSize 以控制每一层的缩进宽度。

~~如果不需要或配置为其他字段可以用 childrenColumnName 进行配置。~~

### 示例

```jsx live
function 树形表格() {
  const { dataSource4, columns4 } = assets.biz
  const pipeline = useTablePipeline({ components: fusion })
    .input({ dataSource: dataSource4, columns: columns4 })
    .primaryKey('id')
    .use(features.treeMode({ defaultOpenKeys: ['4', '4-2'] }))

  return (
    <>
      <assets.FusionStyles />
      <BaseTable {...pipeline.getProps()} />
    </>
  )
}
```

### 用法

- 启用行多选功能之前，pipeline 必须已经设置了 primaryKey。
- 避免同时使用 非受控和受控的用法。

```jsx
pipeline.use(features.treeMode(options))
```

options 结构如下：

```typescript
export interface TreeModeFeatureOptions {
  defaultOpenKeys?: string[]
  openKeys?: string[]
  onChangeOpenKeys?(nextKeys: string[], key: string, action: 'expand' | 'collapse'): void
  isLeafNode?(node: any, nodeMeta: { depth: number; expanded: boolean; rowKey: string }): boolean

  // todo 缩进相关 options
}
```
